import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash-exp",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: Goa, for 3 days for  couple with a cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with PlaceName, Place Details, Place Image url, Geo Coordinates, ticket pricing, rating, time travel of the each location for 3 days with each day plan with best time to visit in JSON format",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "location": "Goa",\n  "duration": "3 Days",\n  "budget": "Cheap",\n    "travelers": "Couple",\n    "hotels": [\n      {\n            "hotelName": "Hotel Susegad",\n            "hotelAddress": "Near Baga Beach, Baga, Goa",\n             "price": "₹1500 - ₹2000 per night",\n           "hotelImageUrl": "https://example.com/hotel_susegad.jpg",\n            "geoCoordinates": {\n              "latitude": 15.5555,\n              "longitude": 73.7522\n            },\n            "rating": 3.8,\n            "description": "A basic but clean hotel near Baga beach. Offers essential amenities with a budget-friendly approach."\n          },\n          {\n            "hotelName": "Casa Anjuna",\n            "hotelAddress": "Anjuna, Goa",\n            "price": "₹1800 - ₹2500 per night",\n           "hotelImageUrl": "https://example.com/casa_anjuna.jpg",\n            "geoCoordinates": {\n              "latitude": 15.5717,\n              "longitude": 73.7383\n            },\n             "rating": 4.0,\n             "description": "Simple guesthouse in a quiet neighborhood of Anjuna. Clean rooms and friendly service."\n        },\n        {\n            "hotelName": "Backpackers Panda Goa",\n           "hotelAddress": "Near Calangute Beach, Calangute, Goa",\n            "price": "₹1200 - ₹1800 per night",\n             "hotelImageUrl":"https://example.com/backpackers_panda.jpg",\n            "geoCoordinates": {\n              "latitude": 15.5435,\n              "longitude": 73.7614\n            },\n            "rating": 3.5,\n            "description": "A budget-friendly hostel with private rooms available. Great for backpackers and travelers on a tight budget."\n        }\n     ],\n  "itinerary": {\n        "day1": {\n              "theme": "Beaches and Sunset",\n                "bestTimeToVisit": "October to April (avoiding monsoon)",\n              "places": [\n                  {\n                      "placeName": "Calangute Beach",\n                      "placeDetails": "Popular and bustling beach with plenty of shacks and water sports.",\n                       "placeImageUrl": "https://example.com/calangute_beach.jpg",\n                     "geoCoordinates": {\n                        "latitude": 15.5455,\n                         "longitude": 73.7600\n                    },\n                    "ticketPricing": "Free",\n                      "rating": 4.2,\n                      "travelTime": "30 mins from hotel Susegad, 10 mins from Backpackers Panda"\n                    },\n                  {\n                      "placeName": "Baga Beach",\n                      "placeDetails": "Known for its vibrant nightlife and water sports activities.",\n                        "placeImageUrl":"https://example.com/baga_beach.jpg",\n                      "geoCoordinates": {\n                        "latitude": 15.5569,\n                       "longitude": 73.7517\n                      },\n                     "ticketPricing": "Free",\n                      "rating": 4.0,\n                       "travelTime": "5 mins from hotel Susegad, 20 min from backpackers panda"\n                    },\n                  {\n                      "placeName": "Sunset at Fort Aguada",\n                     "placeDetails": "Enjoy a scenic sunset view from the historic Fort.",\n                       "placeImageUrl": "https://example.com/fort_aguada.jpg",\n                     "geoCoordinates": {\n                         "latitude": 15.4952,\n                        "longitude": 73.7562\n                      },\n                      "ticketPricing": "₹25 per person",\n                      "rating": 4.5,\n                      "travelTime": "30 mins from Baga or Calangute beaches"\n                    }\n                ]\n            },\n        "day2": {\n                "theme": "Culture and Relaxation",\n                "bestTimeToVisit": "Morning or late afternoon for comfort",\n                "places": [\n                    {\n                      "placeName": "Basilica of Bom Jesus",\n                      "placeDetails": "A UNESCO World Heritage site, this ancient church is a must-visit for its architecture and history.",\n                       "placeImageUrl": "https://example.com/basilica_bom_jesus.jpg",\n                        "geoCoordinates": {\n                            "latitude": 15.5011,\n                           "longitude": 73.9145\n                        },\n                     "ticketPricing": "Free",\n                        "rating": 4.4,\n                        "travelTime": "1 hour from Baga/Calangute, 1 hour and 15 min from Anjuna"\n                    },\n                    {\n                        "placeName": "Se Cathedral",\n                        "placeDetails": "One of the largest churches in Asia, known for its impressive architecture.",\n                        "placeImageUrl": "https://example.com/se_cathedral.jpg",\n                        "geoCoordinates": {\n                            "latitude": 15.4998,\n                           "longitude": 73.9164\n                        },\n                      "ticketPricing": "Free",\n                      "rating": 4.3,\n                       "travelTime": "5 min from Basilica of Bom Jesus"\n\n                   },\n                   {\n                       "placeName": "Anjuna Flea Market (Wednesday)",\n                       "placeDetails": "If Wednesday, explore the famous flea market for souvenirs and local goods. (Note: It\'s not daily)",\n                       "placeImageUrl": "https://example.com/anjuna_market.jpg",\n                        "geoCoordinates": {\n                            "latitude": 15.5736,\n                            "longitude": 73.7376\n                         },\n                        "ticketPricing": "Free (but costs on shopping)",\n                         "rating": 4.0,\n                        "travelTime": "40 min from Se Cathedral, 15 mins from Casa Anjuna (if you are staying there)"\n                    },\n                    {\n                      "placeName": "Arambol Beach",\n                      "placeDetails": "A relaxed beach known for its bohemian vibe and natural beauty, and good for a walk.",\n                      "placeImageUrl": "https://example.com/arambol_beach.jpg",\n                        "geoCoordinates": {\n                           "latitude": 15.6672,\n                           "longitude": 73.7060\n                        },\n                       "ticketPricing": "Free",\n                       "rating": 4.1,\n                        "travelTime": "1 hour 10 min from Anjuna , 1 hour 30 mins from Old Goa Churches"\n                    }\n                 ]\n            },\n       "day3": {\n               "theme": "Island and Coastal Scenery",\n               "bestTimeToVisit": "Morning to early afternoon for ferry times",\n               "places": [\n                  {\n                      "placeName": "Divar Island",\n                       "placeDetails": "Explore the serene beauty of Divar Island by taking a short ferry ride.",\n                        "placeImageUrl": "https://example.com/divar_island.jpg",\n                       "geoCoordinates": {\n                         "latitude": 15.5384,\n                         "longitude": 73.9095\n                       },\n                       "ticketPricing": "Ferry: ₹10 per person",\n                       "rating": 4.2,\n                       "travelTime": "1 hour from north Goa beaches, 30 min from Panjim"\n                    },\n                   {\n                      "placeName": "Chorao Island and Salim Ali Bird Sanctuary",\n                      "placeDetails": "If interested in nature, visit Chorao Island and the bird sanctuary. (additional travel/entry cost might apply)",\n                      "placeImageUrl": "https://example.com/chorao_island.jpg",\n                       "geoCoordinates": {\n                         "latitude": 15.5403,\n                         "longitude": 73.9535\n                       },\n                     "ticketPricing": "Sanctuary entry: ₹100 per person",\n                      "rating": 4.0,\n                       "travelTime": "20 mins from Divar Island"\n                    },\n                    {\n                        "placeName": "Mandovi River Cruise (Optional)",\n                        "placeDetails": "End the trip with a relaxing sunset river cruise (might add to the budget).",\n                       "placeImageUrl": "https://example.com/mandovi_cruise.jpg",\n                       "geoCoordinates": {\n                            "latitude": 15.4990,\n                            "longitude": 73.8231\n                        },\n                        "ticketPricing": "₹300-₹500 per person",\n                       "rating": 4.3,\n                      "travelTime": "40 mins from Chorao Island, 1 hour from Divar Island"\n                    }\n               ]\n         }\n      }\n}\n```',
        },
      ],
    },
  ],
});
